$(document).ready(() => {
  const myForm = document.querySelector('#form__container');
  const send = document.querySelector('#delivery__form-button__submit');

  send.addEventListener('click', event => {
    event.preventDefault();

    if (validateForm(myForm)) {
      const data = {
        name: myForm.elements.name.value,
        phone: myForm.elements.phone.value,
        comment: myForm.elements.comment.value,
        to: myForm.elements.to.value
      }
      const xhr = new XMLHttpRequest();
      xhr.responseType = 'json';
      xhr.open('POST', 'https://webdev-api.loftschool.com/sendmail');
      xhr.setRequestHeader('content-type', 'application/json');
      xhr.send(JSON.stringify(data));
      xhr.addEventListener('load', () =>{
        if (xhr.status >= 400) {
          $('.cont--form___error').css({'display': 'block'})
        } else {
          $('.form__container').css({'display': 'block'})
        }
        $('.form--close__btn').on('click', (e) =>{
          e.preventDefault();
          $('.form__container').css({'display': 'none'})
          $('.cont--form___error').css({'display': 'none'})
        });
      });
      
    } else {
      console.log('Какая-то ошибка')
    }



  });

  function validateForm(form) {
    let valValue = true;

    if (!validateField(form.elements.name)) {
      valValue = false;
    }
    if (!validateField(form.elements.phone)) {
      valValue = false;
    }
    if (!validateField(form.elements.to)) {
      valValue = false;
    }
    if (!validateField(form.elements.comment)) {
      valValue = false;
    }
    return valValue;
  }

  function validateField(field) {
    if (!field.checkValidity()) {
      field.nextElementSibling.textContent = field.validationMessage;

      return false;
    } else {
      field.nextElementSibling.textContent = '';

      return true;
    }
  }
});
$('.single-item').slick();

$(document).ready(function() {
  $('.single-item').slick({
    arrows: true
  });
});

// const hideBar = document.querySelector("#hides__bar")
// const burgerMenu = document.querySelector(".burger__menu")
// const burgerClose = document.querySelector(".burger__close")

// burgerMenu.addEventListener("click", () => {
//   hideBar.style.display = "block";
//   burgerClose.style.display = "block";
//   burgerMenu.style.display = "none";
// });

// burgerClose.addEventListener("click", () => {
//   hideBar.style.display = "none";
//   burgerClose.style.display = "none";
//   burgerMenu.style.display = "";
// });
let myMap;

const init = () => {
  myMap = new ymaps.Map('map', {
    center: [55.76, 37.64],
    zoom: 11,
    controls: []
  })

  const coords = [
    [55.75, 37.50],
    [55.75, 37.71],
    [55.70, 37.70]
  ];

  const myCollection = new ymaps.GeoObjectCollection({}, {
    draggable: false,
    iconLayout: 'default#image',
    iconImageHref: "./img/marker1.png",
    iconImageSize: [46, 57],
    iconImageOffset: [-35, -52]
  })

  coords.forEach(coord => {
    myCollection.add(new ymaps.Placemark(coord))
  });

  myMap.geoObjects.add(myCollection);

  myMap.behaviors.disable('scrollZoom');
}

ymaps.ready(init);
$(document).ready(() =>{

  // const newPas = document.querySelector('.slide__menu').getBoundingClientRect();
  // const toLeft = newPas.left;
  // const slideWidth = $('.menu__slide').width();
  // const whatLeft = toLeft - slideWidth;

  $(window).resize(function() {
    $('.menu__slide').removeClass('menu--active');
    $('.menu__slider--content').width('0');
    $('.container---menu').removeClass('container---active');
  });

  $('.menu__slide').on('click', function(e) {
    e.preventDefault();
    const widthClient = document.documentElement.clientWidth;    
    if ($(this).hasClass('menu--active')) {
      $(this).removeClass('menu--active');
      $(this).next('.menu__slider--content').width('0');
      $(this).closest('.container---menu').removeClass('container---active');
    } else {
      if (widthClient < 480) {
        const slideWidth = $('.menu__slide').width();
        const qwert = slideWidth;
        const slideLefted = widthClient - qwert;
        $(this).next('.menu__slider--content').width(slideLefted);
        $(this).addClass('menu--active');
        $(this).closest('.container---menu').siblings('.container---menu').find('.menu__slide').next('.menu__slider--content').width('0');
        $(this).closest('.container---menu').siblings('.container---menu').find('.menu__slide').removeClass('menu--active');
        $(this).closest('.container---menu').addClass('container---active');
      } else {
        if (widthClient < 768) {
          const slideWidth = $('.menu__slide').width();
          const qwert = slideWidth * 3;
          const slideLefted = widthClient - qwert;
          $(this).next('.menu__slider--content').width(slideLefted);
          $(this).addClass('menu--active');
          $(this).closest('.container---menu').siblings('.container---menu').find('.menu__slide').next('.menu__slider--content').width('0');
          $(this).closest('.container---menu').siblings('.container---menu').find('.menu__slide').removeClass('menu--active');
        } else {
            $(this).next('.menu__slider--content').width('37vh');
            $(this).addClass('menu--active');
            $(this).closest('.container---menu').siblings('.container---menu').find('.menu__slide').next('.menu__slider--content').width('0');
            $(this).closest('.container---menu').siblings('.container---menu').find('.menu__slide').removeClass('menu--active');
        }
      }






















      // if ($(this).hasClass('menu--active')) {
      //   $(this).removeClass('menu--active');
      //   $(this).next('.menu__slider--content').width('0');
      // } else {
      //   if (widthClient < 768) {
      //     const slideWidth = $('.menu__slide').width();
      //     const qwert = slideWidth * 3;
      //     const slideLefted = widthClient - qwert;
      //     $(this).next('.menu__slider--content').width(slideLefted);
      //     $(this).addClass('menu--active');
      //     $(this).siblings('.menu__slide').next('.menu__slider--content').width('0');
      //     $(this).siblings('.menu__slide').removeClass('menu--active');
      //   } else {
      //     $(this).next('.menu__slider--content').width('37vh');
      //     $(this).addClass('menu--active');
      //     $(this).siblings('.menu__slide').next('.menu__slider--content').width('0');
      //     $(this).siblings('.menu__slide').removeClass('menu--active');
      //   }
    }
  });

  

  $('.menu--close').on('click', function(e) {
    e.preventDefault();
    $('.menu--close').closest('.menu__slider--content').width('0');
    $('.container---menu').removeClass('container---active');

  });
  


  // $('.menu__title').on('click', function() {
    // const widthClient = document.documentElement.clientWidth;
    // if (widthClient >= 800) {
    //   alert('БОЛЬШЕ 800')
    // } else {
    //   alert('МЕНЬШЕ')
    // }


  //   console.log(whatLeft);
  // });



  
});
$(document).ready(() =>{

  const sections = $('section');
  const display = $('.maincontent');
  const sideMenu = $('.sidebar')

  const mobileDetect = new MobileDetect(window.navigator.userAgent);
  const isMobile = mobileDetect.mobile();

  let inScroll = false;

  sections.first().addClass('active--ops');

  const coundSectionPosition = (sectionEq) => {
    return sectionEq * -100;
  }

  const changeMenuThemeForSection = (sectionEq) => {
    const currentSection = sections.eq(sectionEq)
    const menuTheme = currentSection.attr('data-sidemenu-theme')
    // const sideMenu = $('.sidebar')
    const classActive = 'sidebar--active';

    if (menuTheme == 'black') {
      sideMenu.addClass(classActive)
    } else {
      sideMenu.removeClass(classActive)
    }
  }

  const performTransition = (sectionEq) => {
    if (inScroll == false) {
    inScroll = true;
    const position = coundSectionPosition(sectionEq);

    // const currentSection = sections.eq(sectionEq)
    // const menuTheme = currentSection.attr('data-sidemenu-theme')
    // const sideMenu = $('.sidebar')

    // if (menuTheme == 'black') {
    //   sideMenu.addClass('sidebar--active')
    // } else {
    //   sideMenu.removeClass('sidebar--active')
    // }

    changeMenuThemeForSection(sectionEq)

    display.css({
      transform: `translateY(${position}%)`
    });

    sections.eq(sectionEq).addClass('active--ops').siblings().removeClass('active--ops');

    sideMenu.find('.sidebar__list-item__link').eq(sectionEq).addClass('sidebar__link--active').siblings('.sidebar__list-item__link').removeClass('sidebar__link--active');

    setTimeout(() => {
      inScroll = false;

      sideMenu.find('.sidebar__list-item__link').eq(sectionEq).addClass('sidebar__link--active').closest('.sidebar__list-item').siblings('.sidebar__list-item').find('.sidebar__list-item__link').removeClass('sidebar__link--active');
    }, 1300);
    }

  }

  const scrollViewport = direction => {
    const activeSection = sections.filter('.active--ops');
    const nextSection = activeSection.next();
    const prevSection = activeSection.prev();

    if (direction == 'next' && nextSection.length) {
      performTransition(nextSection.index())
    }

    if (direction == 'prev' && prevSection.length) {
      performTransition(prevSection.index())
    }
  }

  $(window).on("wheel", e => {
  const deltaY = e.originalEvent.deltaY;
  // console.log(deltaY)

  if (deltaY > 0) {
    scrollViewport('next');
  }

  if (deltaY < 0) {
    scrollViewport('prev');
  }
  });

  $(window).on('keydown', e =>{
    const tagesName = e.target.tagName.toLowerCase();
    if (tagesName != 'input' && tagesName != 'textarea') {
          switch (e.keyCode) {
      case 38:
        scrollViewport('prev');
        break;
    
      case 40:
        scrollViewport('next');
        break;
      }
    }

  });

  $('.wrapper').on('touchmove', e => e.preventDefault());

  $('[data-scroll-to]').click(e => {
    e.preventDefault();
    
    const thisIts = $(e.currentTarget);
    const scroLlet = thisIts.attr('data-scroll-to');
    const regSedtion = $(`[data-section-id=${scroLlet}]`)

    // console.log(regSedtion.index());
    performTransition(regSedtion.index());
    // console.log(regSedtion.index());
  });

  if (isMobile) {
    $("body").swipe( {
    swipe: function(
      event,
      direction,
      ) {
      const scroller = viewportScroller();
      let scrollDirection = '';

      if (direction == 'up') scrollDirection = 'next';
      if (direction == 'down') scrollDirection = 'prev';
      
      scroller[scrollDirection]();
    }
  });
  }
});
let player;
const videoContainer = $('.player');

let eventsList = () => {
  $('.player__start').click(e =>{
    e.preventDefault();
    if (videoContainer.hasClass('paused')) {
      // videoContainer.removeClass('paused');
      player.pauseVideo()      
    }else{
      // videoContainer.addClass('paused');
      player.playVideo()
    }

  });

  $('.player__playback').click(e => {
    const bar = $(e.currentTarget);
    const clickedPosition =  e.originalEvent.layerX;
    const NewButtonPositionPercent = (clickedPosition / bar.width()) * 100;
    const newPlaybackPosition = (player.getDuration() / 100) * NewButtonPositionPercent;

    $('.player__playback-btn').css({'left' : `${NewButtonPositionPercent}%`});

    player.seekTo(newPlaybackPosition);
  });
    $('.player__compos-preveiw').click(e => {
    // let newTargets = e.currentTarget;
    player.playVideo();
  });
};

const formatTime = timeSec => {
  const roundTime = Math.round(timeSec);

  const minutes = addZero(Math.floor(roundTime / 60));
  const seconds = addZero(roundTime - minutes * 60);

  function addZero(num){
    return num < 10 ? `0${num}` : num;
  };

  return `${minutes} : ${seconds}`;
};

const onPlayerReady = () => {
  let interval;

  const durationSeconds = player.getDuration();

  $('.player__duration-estimate').text(formatTime(durationSeconds));

  if (typeof interval != 'undefined') {
    clearInterval(interval)
  }

  interval = setInterval(() => {
    const completedSec = player.getCurrentTime();
    const completedPercent = (completedSec / durationSeconds) * 100;
    $('.player__playback-btn').css({'left' : `${completedPercent}%`});
    $('.player__duration-completed').text(formatTime (completedSec)); 
  }, 1000);
};

const onPlayerStateChange = event => {
  switch (event.data){
    case 1:
      videoContainer.addClass('active');
      videoContainer.addClass('paused');
      break;
    
    case 2:
      videoContainer.removeClass('active');
      videoContainer.removeClass('paused'); 
      break;
  }
}

function onYouTubeIframeAPIReady() {
  player = new YT.Player('player--video', {
    height: '357',
    width: '662',
    videoId: '8jJgNdi-u5k',
    events: {
      'onReady': onPlayerReady,
      'onStateChange': onPlayerStateChange
    },
    playerVars: {
      controls: 0,
      disablekb: 0,
      // showinfo: 0,
      rel: 0,
      autoplay: 0,
      modestbranding: 0
    }
  });
}

eventsList();
$(document).ready(() => {
  $('.reviews__content-list__item-link').on('click', function(e) {
    e.preventDefault()
  })






  $('.reviews__content-list__item').on('click', function(e) {
    let indexItem = $(this).index()
    $('.reviews__content').eq(indexItem).addClass('reviews--active');
    $('.reviews__content').eq(indexItem).siblings('.reviews__content').removeClass('reviews--active')
    $(this).find('.reviews__content-list__item-link').addClass('reviews__content--active');
    $(this).siblings('.reviews__content-list__item').find('.reviews__content-list__item-link').removeClass('reviews__content--active')
    console.log(indexItem)
  });


});
const hideBar = document.querySelector('#hides__bar')
const burgerMenu = document.querySelector('.burger__menu')
const burgerClose = document.querySelector('.burger__close')

burgerMenu.addEventListener('click', () => {
  hideBar.style.display = 'block';
  burgerClose.style.display = 'block';
  burgerMenu.style.display = 'none';
});

burgerClose.addEventListener('click', () => {
  hideBar.style.display = 'none';
  burgerClose.style.display = 'none';
  burgerMenu.style.display = '';
});

const sliderCompos = document.querySelector('.slider__compos')
const sliderContent = document.querySelector('.slider__compos-popup')
sliderCompos.onmouseover = () => {
  sliderContent.style.display = 'block';
};
sliderCompos.onmouseout = () => {
  sliderContent.style.display = 'none';
};
$(document).ready(() => {
  $('.team__item-name').on('click', function(e){
    const accordActiveClose = $('.accord--active')
    const sliderClose = $('team__item').hasClass(!accordActiveClose);
    if ($(this).hasClass('accord--active')){
      $(this).removeClass('accord--active');
      $(this).next('.team__item-content').slideUp();
    }else{
      // let clonePos = $(this).prev('.team__item-head');
      $(this).addClass('accord--active');
      $(this).next('.team__item-content').slideDown(200);
      $(this).siblings('.team__item-content').slideDown(200);
      $(this).closest('.team__item').siblings('.team__item').find('.team__item-content').slideUp();
      $(this).closest('.team__item').siblings('.team__item').find('.team__item-name').removeClass('accord--active');
      // $(clonePos).css({'display' : 'inline-block'})
      // let cloness = $(this).next('.team__item-content');
      // $(this).prev('.team__item-head').prependTo(cloness);
    };
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm0uanMiLCJtYWluLmpzIiwibWFwLmpzIiwibWVudS5qcyIsIm9wcy5qcyIsInBsYXllci5qcyIsInJldmlld3MuanMiLCJzbGlkZXIuanMiLCJ0ZWFtLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XG4gIGNvbnN0IG15Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtX19jb250YWluZXInKTtcbiAgY29uc3Qgc2VuZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZWxpdmVyeV9fZm9ybS1idXR0b25fX3N1Ym1pdCcpO1xuXG4gIHNlbmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmICh2YWxpZGF0ZUZvcm0obXlGb3JtKSkge1xuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgbmFtZTogbXlGb3JtLmVsZW1lbnRzLm5hbWUudmFsdWUsXG4gICAgICAgIHBob25lOiBteUZvcm0uZWxlbWVudHMucGhvbmUudmFsdWUsXG4gICAgICAgIGNvbW1lbnQ6IG15Rm9ybS5lbGVtZW50cy5jb21tZW50LnZhbHVlLFxuICAgICAgICB0bzogbXlGb3JtLmVsZW1lbnRzLnRvLnZhbHVlXG4gICAgICB9XG4gICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICB4aHIub3BlbignUE9TVCcsICdodHRwczovL3dlYmRldi1hcGkubG9mdHNjaG9vbC5jb20vc2VuZG1haWwnKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PntcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICAgICAgJCgnLmNvbnQtLWZvcm1fX19lcnJvcicpLmNzcyh7J2Rpc3BsYXknOiAnYmxvY2snfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKCcuZm9ybV9fY29udGFpbmVyJykuY3NzKHsnZGlzcGxheSc6ICdibG9jayd9KVxuICAgICAgICB9XG4gICAgICAgICQoJy5mb3JtLS1jbG9zZV9fYnRuJykub24oJ2NsaWNrJywgKGUpID0+e1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAkKCcuZm9ybV9fY29udGFpbmVyJykuY3NzKHsnZGlzcGxheSc6ICdub25lJ30pXG4gICAgICAgICAgJCgnLmNvbnQtLWZvcm1fX19lcnJvcicpLmNzcyh7J2Rpc3BsYXknOiAnbm9uZSd9KVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCfQmtCw0LrQsNGPLdGC0L4g0L7RiNC40LHQutCwJylcbiAgICB9XG5cblxuXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlRm9ybShmb3JtKSB7XG4gICAgbGV0IHZhbFZhbHVlID0gdHJ1ZTtcblxuICAgIGlmICghdmFsaWRhdGVGaWVsZChmb3JtLmVsZW1lbnRzLm5hbWUpKSB7XG4gICAgICB2YWxWYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIXZhbGlkYXRlRmllbGQoZm9ybS5lbGVtZW50cy5waG9uZSkpIHtcbiAgICAgIHZhbFZhbHVlID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICghdmFsaWRhdGVGaWVsZChmb3JtLmVsZW1lbnRzLnRvKSkge1xuICAgICAgdmFsVmFsdWUgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCF2YWxpZGF0ZUZpZWxkKGZvcm0uZWxlbWVudHMuY29tbWVudCkpIHtcbiAgICAgIHZhbFZhbHVlID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB2YWxWYWx1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlRmllbGQoZmllbGQpIHtcbiAgICBpZiAoIWZpZWxkLmNoZWNrVmFsaWRpdHkoKSkge1xuICAgICAgZmllbGQubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID0gZmllbGQudmFsaWRhdGlvbk1lc3NhZ2U7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmllbGQubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID0gJyc7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxufSk7IiwiJCgnLnNpbmdsZS1pdGVtJykuc2xpY2soKTtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICQoJy5zaW5nbGUtaXRlbScpLnNsaWNrKHtcclxuICAgIGFycm93czogdHJ1ZVxyXG4gIH0pO1xyXG59KTtcclxuXHJcbi8vIGNvbnN0IGhpZGVCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hpZGVzX19iYXJcIilcclxuLy8gY29uc3QgYnVyZ2VyTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyX19tZW51XCIpXHJcbi8vIGNvbnN0IGJ1cmdlckNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJfX2Nsb3NlXCIpXHJcblxyXG4vLyBidXJnZXJNZW51LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbi8vICAgaGlkZUJhci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4vLyAgIGJ1cmdlckNsb3NlLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbi8vICAgYnVyZ2VyTWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbi8vIH0pO1xyXG5cclxuLy8gYnVyZ2VyQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuLy8gICBoaWRlQmFyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuLy8gICBidXJnZXJDbG9zZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbi8vICAgYnVyZ2VyTWVudS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcclxuLy8gfSk7IiwibGV0IG15TWFwO1xuXG5jb25zdCBpbml0ID0gKCkgPT4ge1xuICBteU1hcCA9IG5ldyB5bWFwcy5NYXAoJ21hcCcsIHtcbiAgICBjZW50ZXI6IFs1NS43NiwgMzcuNjRdLFxuICAgIHpvb206IDExLFxuICAgIGNvbnRyb2xzOiBbXVxuICB9KVxuXG4gIGNvbnN0IGNvb3JkcyA9IFtcbiAgICBbNTUuNzUsIDM3LjUwXSxcbiAgICBbNTUuNzUsIDM3LjcxXSxcbiAgICBbNTUuNzAsIDM3LjcwXVxuICBdO1xuXG4gIGNvbnN0IG15Q29sbGVjdGlvbiA9IG5ldyB5bWFwcy5HZW9PYmplY3RDb2xsZWN0aW9uKHt9LCB7XG4gICAgZHJhZ2dhYmxlOiBmYWxzZSxcbiAgICBpY29uTGF5b3V0OiAnZGVmYXVsdCNpbWFnZScsXG4gICAgaWNvbkltYWdlSHJlZjogXCIuL2ltZy9tYXJrZXIxLnBuZ1wiLFxuICAgIGljb25JbWFnZVNpemU6IFs0NiwgNTddLFxuICAgIGljb25JbWFnZU9mZnNldDogWy0zNSwgLTUyXVxuICB9KVxuXG4gIGNvb3Jkcy5mb3JFYWNoKGNvb3JkID0+IHtcbiAgICBteUNvbGxlY3Rpb24uYWRkKG5ldyB5bWFwcy5QbGFjZW1hcmsoY29vcmQpKVxuICB9KTtcblxuICBteU1hcC5nZW9PYmplY3RzLmFkZChteUNvbGxlY3Rpb24pO1xuXG4gIG15TWFwLmJlaGF2aW9ycy5kaXNhYmxlKCdzY3JvbGxab29tJyk7XG59XG5cbnltYXBzLnJlYWR5KGluaXQpOyIsIiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+e1xuXG4gIC8vIGNvbnN0IG5ld1BhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZV9fbWVudScpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAvLyBjb25zdCB0b0xlZnQgPSBuZXdQYXMubGVmdDtcbiAgLy8gY29uc3Qgc2xpZGVXaWR0aCA9ICQoJy5tZW51X19zbGlkZScpLndpZHRoKCk7XG4gIC8vIGNvbnN0IHdoYXRMZWZ0ID0gdG9MZWZ0IC0gc2xpZGVXaWR0aDtcblxuICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgICQoJy5tZW51X19zbGlkZScpLnJlbW92ZUNsYXNzKCdtZW51LS1hY3RpdmUnKTtcbiAgICAkKCcubWVudV9fc2xpZGVyLS1jb250ZW50Jykud2lkdGgoJzAnKTtcbiAgICAkKCcuY29udGFpbmVyLS0tbWVudScpLnJlbW92ZUNsYXNzKCdjb250YWluZXItLS1hY3RpdmUnKTtcbiAgfSk7XG5cbiAgJCgnLm1lbnVfX3NsaWRlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB3aWR0aENsaWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDsgICAgXG4gICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ21lbnUtLWFjdGl2ZScpKSB7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdtZW51LS1hY3RpdmUnKTtcbiAgICAgICQodGhpcykubmV4dCgnLm1lbnVfX3NsaWRlci0tY29udGVudCcpLndpZHRoKCcwJyk7XG4gICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jb250YWluZXItLS1tZW51JykucmVtb3ZlQ2xhc3MoJ2NvbnRhaW5lci0tLWFjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAod2lkdGhDbGllbnQgPCA0ODApIHtcbiAgICAgICAgY29uc3Qgc2xpZGVXaWR0aCA9ICQoJy5tZW51X19zbGlkZScpLndpZHRoKCk7XG4gICAgICAgIGNvbnN0IHF3ZXJ0ID0gc2xpZGVXaWR0aDtcbiAgICAgICAgY29uc3Qgc2xpZGVMZWZ0ZWQgPSB3aWR0aENsaWVudCAtIHF3ZXJ0O1xuICAgICAgICAkKHRoaXMpLm5leHQoJy5tZW51X19zbGlkZXItLWNvbnRlbnQnKS53aWR0aChzbGlkZUxlZnRlZCk7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ21lbnUtLWFjdGl2ZScpO1xuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jb250YWluZXItLS1tZW51Jykuc2libGluZ3MoJy5jb250YWluZXItLS1tZW51JykuZmluZCgnLm1lbnVfX3NsaWRlJykubmV4dCgnLm1lbnVfX3NsaWRlci0tY29udGVudCcpLndpZHRoKCcwJyk7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmNvbnRhaW5lci0tLW1lbnUnKS5zaWJsaW5ncygnLmNvbnRhaW5lci0tLW1lbnUnKS5maW5kKCcubWVudV9fc2xpZGUnKS5yZW1vdmVDbGFzcygnbWVudS0tYWN0aXZlJyk7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmNvbnRhaW5lci0tLW1lbnUnKS5hZGRDbGFzcygnY29udGFpbmVyLS0tYWN0aXZlJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAod2lkdGhDbGllbnQgPCA3NjgpIHtcbiAgICAgICAgICBjb25zdCBzbGlkZVdpZHRoID0gJCgnLm1lbnVfX3NsaWRlJykud2lkdGgoKTtcbiAgICAgICAgICBjb25zdCBxd2VydCA9IHNsaWRlV2lkdGggKiAzO1xuICAgICAgICAgIGNvbnN0IHNsaWRlTGVmdGVkID0gd2lkdGhDbGllbnQgLSBxd2VydDtcbiAgICAgICAgICAkKHRoaXMpLm5leHQoJy5tZW51X19zbGlkZXItLWNvbnRlbnQnKS53aWR0aChzbGlkZUxlZnRlZCk7XG4gICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnbWVudS0tYWN0aXZlJyk7XG4gICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuY29udGFpbmVyLS0tbWVudScpLnNpYmxpbmdzKCcuY29udGFpbmVyLS0tbWVudScpLmZpbmQoJy5tZW51X19zbGlkZScpLm5leHQoJy5tZW51X19zbGlkZXItLWNvbnRlbnQnKS53aWR0aCgnMCcpO1xuICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmNvbnRhaW5lci0tLW1lbnUnKS5zaWJsaW5ncygnLmNvbnRhaW5lci0tLW1lbnUnKS5maW5kKCcubWVudV9fc2xpZGUnKS5yZW1vdmVDbGFzcygnbWVudS0tYWN0aXZlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKHRoaXMpLm5leHQoJy5tZW51X19zbGlkZXItLWNvbnRlbnQnKS53aWR0aCgnMzd2aCcpO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnbWVudS0tYWN0aXZlJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jb250YWluZXItLS1tZW51Jykuc2libGluZ3MoJy5jb250YWluZXItLS1tZW51JykuZmluZCgnLm1lbnVfX3NsaWRlJykubmV4dCgnLm1lbnVfX3NsaWRlci0tY29udGVudCcpLndpZHRoKCcwJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jb250YWluZXItLS1tZW51Jykuc2libGluZ3MoJy5jb250YWluZXItLS1tZW51JykuZmluZCgnLm1lbnVfX3NsaWRlJykucmVtb3ZlQ2xhc3MoJ21lbnUtLWFjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICB9XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiAgICAgIC8vIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdtZW51LS1hY3RpdmUnKSkge1xuICAgICAgLy8gICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdtZW51LS1hY3RpdmUnKTtcbiAgICAgIC8vICAgJCh0aGlzKS5uZXh0KCcubWVudV9fc2xpZGVyLS1jb250ZW50Jykud2lkdGgoJzAnKTtcbiAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAvLyAgIGlmICh3aWR0aENsaWVudCA8IDc2OCkge1xuICAgICAgLy8gICAgIGNvbnN0IHNsaWRlV2lkdGggPSAkKCcubWVudV9fc2xpZGUnKS53aWR0aCgpO1xuICAgICAgLy8gICAgIGNvbnN0IHF3ZXJ0ID0gc2xpZGVXaWR0aCAqIDM7XG4gICAgICAvLyAgICAgY29uc3Qgc2xpZGVMZWZ0ZWQgPSB3aWR0aENsaWVudCAtIHF3ZXJ0O1xuICAgICAgLy8gICAgICQodGhpcykubmV4dCgnLm1lbnVfX3NsaWRlci0tY29udGVudCcpLndpZHRoKHNsaWRlTGVmdGVkKTtcbiAgICAgIC8vICAgICAkKHRoaXMpLmFkZENsYXNzKCdtZW51LS1hY3RpdmUnKTtcbiAgICAgIC8vICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubWVudV9fc2xpZGUnKS5uZXh0KCcubWVudV9fc2xpZGVyLS1jb250ZW50Jykud2lkdGgoJzAnKTtcbiAgICAgIC8vICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubWVudV9fc2xpZGUnKS5yZW1vdmVDbGFzcygnbWVudS0tYWN0aXZlJyk7XG4gICAgICAvLyAgIH0gZWxzZSB7XG4gICAgICAvLyAgICAgJCh0aGlzKS5uZXh0KCcubWVudV9fc2xpZGVyLS1jb250ZW50Jykud2lkdGgoJzM3dmgnKTtcbiAgICAgIC8vICAgICAkKHRoaXMpLmFkZENsYXNzKCdtZW51LS1hY3RpdmUnKTtcbiAgICAgIC8vICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubWVudV9fc2xpZGUnKS5uZXh0KCcubWVudV9fc2xpZGVyLS1jb250ZW50Jykud2lkdGgoJzAnKTtcbiAgICAgIC8vICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubWVudV9fc2xpZGUnKS5yZW1vdmVDbGFzcygnbWVudS0tYWN0aXZlJyk7XG4gICAgICAvLyAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIFxuXG4gICQoJy5tZW51LS1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgJCgnLm1lbnUtLWNsb3NlJykuY2xvc2VzdCgnLm1lbnVfX3NsaWRlci0tY29udGVudCcpLndpZHRoKCcwJyk7XG4gICAgJCgnLmNvbnRhaW5lci0tLW1lbnUnKS5yZW1vdmVDbGFzcygnY29udGFpbmVyLS0tYWN0aXZlJyk7XG5cbiAgfSk7XG4gIFxuXG5cbiAgLy8gJCgnLm1lbnVfX3RpdGxlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gY29uc3Qgd2lkdGhDbGllbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgLy8gaWYgKHdpZHRoQ2xpZW50ID49IDgwMCkge1xuICAgIC8vICAgYWxlcnQoJ9CR0J7Qm9Cs0KjQlSA4MDAnKVxuICAgIC8vIH0gZWxzZSB7XG4gICAgLy8gICBhbGVydCgn0JzQldCd0KzQqNCVJylcbiAgICAvLyB9XG5cblxuICAvLyAgIGNvbnNvbGUubG9nKHdoYXRMZWZ0KTtcbiAgLy8gfSk7XG5cblxuXG4gIFxufSk7IiwiJChkb2N1bWVudCkucmVhZHkoKCkgPT57XHJcblxyXG4gIGNvbnN0IHNlY3Rpb25zID0gJCgnc2VjdGlvbicpO1xyXG4gIGNvbnN0IGRpc3BsYXkgPSAkKCcubWFpbmNvbnRlbnQnKTtcclxuICBjb25zdCBzaWRlTWVudSA9ICQoJy5zaWRlYmFyJylcclxuXHJcbiAgY29uc3QgbW9iaWxlRGV0ZWN0ID0gbmV3IE1vYmlsZURldGVjdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgY29uc3QgaXNNb2JpbGUgPSBtb2JpbGVEZXRlY3QubW9iaWxlKCk7XHJcblxyXG4gIGxldCBpblNjcm9sbCA9IGZhbHNlO1xyXG5cclxuICBzZWN0aW9ucy5maXJzdCgpLmFkZENsYXNzKCdhY3RpdmUtLW9wcycpO1xyXG5cclxuICBjb25zdCBjb3VuZFNlY3Rpb25Qb3NpdGlvbiA9IChzZWN0aW9uRXEpID0+IHtcclxuICAgIHJldHVybiBzZWN0aW9uRXEgKiAtMTAwO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY2hhbmdlTWVudVRoZW1lRm9yU2VjdGlvbiA9IChzZWN0aW9uRXEpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRTZWN0aW9uID0gc2VjdGlvbnMuZXEoc2VjdGlvbkVxKVxyXG4gICAgY29uc3QgbWVudVRoZW1lID0gY3VycmVudFNlY3Rpb24uYXR0cignZGF0YS1zaWRlbWVudS10aGVtZScpXHJcbiAgICAvLyBjb25zdCBzaWRlTWVudSA9ICQoJy5zaWRlYmFyJylcclxuICAgIGNvbnN0IGNsYXNzQWN0aXZlID0gJ3NpZGViYXItLWFjdGl2ZSc7XHJcblxyXG4gICAgaWYgKG1lbnVUaGVtZSA9PSAnYmxhY2snKSB7XHJcbiAgICAgIHNpZGVNZW51LmFkZENsYXNzKGNsYXNzQWN0aXZlKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2lkZU1lbnUucmVtb3ZlQ2xhc3MoY2xhc3NBY3RpdmUpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBwZXJmb3JtVHJhbnNpdGlvbiA9IChzZWN0aW9uRXEpID0+IHtcclxuICAgIGlmIChpblNjcm9sbCA9PSBmYWxzZSkge1xyXG4gICAgaW5TY3JvbGwgPSB0cnVlO1xyXG4gICAgY29uc3QgcG9zaXRpb24gPSBjb3VuZFNlY3Rpb25Qb3NpdGlvbihzZWN0aW9uRXEpO1xyXG5cclxuICAgIC8vIGNvbnN0IGN1cnJlbnRTZWN0aW9uID0gc2VjdGlvbnMuZXEoc2VjdGlvbkVxKVxyXG4gICAgLy8gY29uc3QgbWVudVRoZW1lID0gY3VycmVudFNlY3Rpb24uYXR0cignZGF0YS1zaWRlbWVudS10aGVtZScpXHJcbiAgICAvLyBjb25zdCBzaWRlTWVudSA9ICQoJy5zaWRlYmFyJylcclxuXHJcbiAgICAvLyBpZiAobWVudVRoZW1lID09ICdibGFjaycpIHtcclxuICAgIC8vICAgc2lkZU1lbnUuYWRkQ2xhc3MoJ3NpZGViYXItLWFjdGl2ZScpXHJcbiAgICAvLyB9IGVsc2Uge1xyXG4gICAgLy8gICBzaWRlTWVudS5yZW1vdmVDbGFzcygnc2lkZWJhci0tYWN0aXZlJylcclxuICAgIC8vIH1cclxuXHJcbiAgICBjaGFuZ2VNZW51VGhlbWVGb3JTZWN0aW9uKHNlY3Rpb25FcSlcclxuXHJcbiAgICBkaXNwbGF5LmNzcyh7XHJcbiAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoJHtwb3NpdGlvbn0lKWBcclxuICAgIH0pO1xyXG5cclxuICAgIHNlY3Rpb25zLmVxKHNlY3Rpb25FcSkuYWRkQ2xhc3MoJ2FjdGl2ZS0tb3BzJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlLS1vcHMnKTtcclxuXHJcbiAgICBzaWRlTWVudS5maW5kKCcuc2lkZWJhcl9fbGlzdC1pdGVtX19saW5rJykuZXEoc2VjdGlvbkVxKS5hZGRDbGFzcygnc2lkZWJhcl9fbGluay0tYWN0aXZlJykuc2libGluZ3MoJy5zaWRlYmFyX19saXN0LWl0ZW1fX2xpbmsnKS5yZW1vdmVDbGFzcygnc2lkZWJhcl9fbGluay0tYWN0aXZlJyk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGluU2Nyb2xsID0gZmFsc2U7XHJcblxyXG4gICAgICBzaWRlTWVudS5maW5kKCcuc2lkZWJhcl9fbGlzdC1pdGVtX19saW5rJykuZXEoc2VjdGlvbkVxKS5hZGRDbGFzcygnc2lkZWJhcl9fbGluay0tYWN0aXZlJykuY2xvc2VzdCgnLnNpZGViYXJfX2xpc3QtaXRlbScpLnNpYmxpbmdzKCcuc2lkZWJhcl9fbGlzdC1pdGVtJykuZmluZCgnLnNpZGViYXJfX2xpc3QtaXRlbV9fbGluaycpLnJlbW92ZUNsYXNzKCdzaWRlYmFyX19saW5rLS1hY3RpdmUnKTtcclxuICAgIH0sIDEzMDApO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIGNvbnN0IHNjcm9sbFZpZXdwb3J0ID0gZGlyZWN0aW9uID0+IHtcclxuICAgIGNvbnN0IGFjdGl2ZVNlY3Rpb24gPSBzZWN0aW9ucy5maWx0ZXIoJy5hY3RpdmUtLW9wcycpO1xyXG4gICAgY29uc3QgbmV4dFNlY3Rpb24gPSBhY3RpdmVTZWN0aW9uLm5leHQoKTtcclxuICAgIGNvbnN0IHByZXZTZWN0aW9uID0gYWN0aXZlU2VjdGlvbi5wcmV2KCk7XHJcblxyXG4gICAgaWYgKGRpcmVjdGlvbiA9PSAnbmV4dCcgJiYgbmV4dFNlY3Rpb24ubGVuZ3RoKSB7XHJcbiAgICAgIHBlcmZvcm1UcmFuc2l0aW9uKG5leHRTZWN0aW9uLmluZGV4KCkpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRpcmVjdGlvbiA9PSAncHJldicgJiYgcHJldlNlY3Rpb24ubGVuZ3RoKSB7XHJcbiAgICAgIHBlcmZvcm1UcmFuc2l0aW9uKHByZXZTZWN0aW9uLmluZGV4KCkpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAkKHdpbmRvdykub24oXCJ3aGVlbFwiLCBlID0+IHtcclxuICBjb25zdCBkZWx0YVkgPSBlLm9yaWdpbmFsRXZlbnQuZGVsdGFZO1xyXG4gIC8vIGNvbnNvbGUubG9nKGRlbHRhWSlcclxuXHJcbiAgaWYgKGRlbHRhWSA+IDApIHtcclxuICAgIHNjcm9sbFZpZXdwb3J0KCduZXh0Jyk7XHJcbiAgfVxyXG5cclxuICBpZiAoZGVsdGFZIDwgMCkge1xyXG4gICAgc2Nyb2xsVmlld3BvcnQoJ3ByZXYnKTtcclxuICB9XHJcbiAgfSk7XHJcblxyXG4gICQod2luZG93KS5vbigna2V5ZG93bicsIGUgPT57XHJcbiAgICBjb25zdCB0YWdlc05hbWUgPSBlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAodGFnZXNOYW1lICE9ICdpbnB1dCcgJiYgdGFnZXNOYW1lICE9ICd0ZXh0YXJlYScpIHtcclxuICAgICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XHJcbiAgICAgIGNhc2UgMzg6XHJcbiAgICAgICAgc2Nyb2xsVmlld3BvcnQoJ3ByZXYnKTtcclxuICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICBjYXNlIDQwOlxyXG4gICAgICAgIHNjcm9sbFZpZXdwb3J0KCduZXh0Jyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgfSk7XHJcblxyXG4gICQoJy53cmFwcGVyJykub24oJ3RvdWNobW92ZScsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuXHJcbiAgJCgnW2RhdGEtc2Nyb2xsLXRvXScpLmNsaWNrKGUgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgXHJcbiAgICBjb25zdCB0aGlzSXRzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgY29uc3Qgc2Nyb0xsZXQgPSB0aGlzSXRzLmF0dHIoJ2RhdGEtc2Nyb2xsLXRvJyk7XHJcbiAgICBjb25zdCByZWdTZWR0aW9uID0gJChgW2RhdGEtc2VjdGlvbi1pZD0ke3Njcm9MbGV0fV1gKVxyXG5cclxuICAgIC8vIGNvbnNvbGUubG9nKHJlZ1NlZHRpb24uaW5kZXgoKSk7XHJcbiAgICBwZXJmb3JtVHJhbnNpdGlvbihyZWdTZWR0aW9uLmluZGV4KCkpO1xyXG4gICAgLy8gY29uc29sZS5sb2cocmVnU2VkdGlvbi5pbmRleCgpKTtcclxuICB9KTtcclxuXHJcbiAgaWYgKGlzTW9iaWxlKSB7XHJcbiAgICAkKFwiYm9keVwiKS5zd2lwZSgge1xyXG4gICAgc3dpcGU6IGZ1bmN0aW9uKFxyXG4gICAgICBldmVudCxcclxuICAgICAgZGlyZWN0aW9uLFxyXG4gICAgICApIHtcclxuICAgICAgY29uc3Qgc2Nyb2xsZXIgPSB2aWV3cG9ydFNjcm9sbGVyKCk7XHJcbiAgICAgIGxldCBzY3JvbGxEaXJlY3Rpb24gPSAnJztcclxuXHJcbiAgICAgIGlmIChkaXJlY3Rpb24gPT0gJ3VwJykgc2Nyb2xsRGlyZWN0aW9uID0gJ25leHQnO1xyXG4gICAgICBpZiAoZGlyZWN0aW9uID09ICdkb3duJykgc2Nyb2xsRGlyZWN0aW9uID0gJ3ByZXYnO1xyXG4gICAgICBcclxuICAgICAgc2Nyb2xsZXJbc2Nyb2xsRGlyZWN0aW9uXSgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIH1cclxufSk7IiwibGV0IHBsYXllcjtcclxuY29uc3QgdmlkZW9Db250YWluZXIgPSAkKCcucGxheWVyJyk7XHJcblxyXG5sZXQgZXZlbnRzTGlzdCA9ICgpID0+IHtcclxuICAkKCcucGxheWVyX19zdGFydCcpLmNsaWNrKGUgPT57XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAodmlkZW9Db250YWluZXIuaGFzQ2xhc3MoJ3BhdXNlZCcpKSB7XHJcbiAgICAgIC8vIHZpZGVvQ29udGFpbmVyLnJlbW92ZUNsYXNzKCdwYXVzZWQnKTtcclxuICAgICAgcGxheWVyLnBhdXNlVmlkZW8oKSAgICAgIFxyXG4gICAgfWVsc2V7XHJcbiAgICAgIC8vIHZpZGVvQ29udGFpbmVyLmFkZENsYXNzKCdwYXVzZWQnKTtcclxuICAgICAgcGxheWVyLnBsYXlWaWRlbygpXHJcbiAgICB9XHJcblxyXG4gIH0pO1xyXG5cclxuICAkKCcucGxheWVyX19wbGF5YmFjaycpLmNsaWNrKGUgPT4ge1xyXG4gICAgY29uc3QgYmFyID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgY29uc3QgY2xpY2tlZFBvc2l0aW9uID0gIGUub3JpZ2luYWxFdmVudC5sYXllclg7XHJcbiAgICBjb25zdCBOZXdCdXR0b25Qb3NpdGlvblBlcmNlbnQgPSAoY2xpY2tlZFBvc2l0aW9uIC8gYmFyLndpZHRoKCkpICogMTAwO1xyXG4gICAgY29uc3QgbmV3UGxheWJhY2tQb3NpdGlvbiA9IChwbGF5ZXIuZ2V0RHVyYXRpb24oKSAvIDEwMCkgKiBOZXdCdXR0b25Qb3NpdGlvblBlcmNlbnQ7XHJcblxyXG4gICAgJCgnLnBsYXllcl9fcGxheWJhY2stYnRuJykuY3NzKHsnbGVmdCcgOiBgJHtOZXdCdXR0b25Qb3NpdGlvblBlcmNlbnR9JWB9KTtcclxuXHJcbiAgICBwbGF5ZXIuc2Vla1RvKG5ld1BsYXliYWNrUG9zaXRpb24pO1xyXG4gIH0pO1xyXG4gICAgJCgnLnBsYXllcl9fY29tcG9zLXByZXZlaXcnKS5jbGljayhlID0+IHtcclxuICAgIC8vIGxldCBuZXdUYXJnZXRzID0gZS5jdXJyZW50VGFyZ2V0O1xyXG4gICAgcGxheWVyLnBsYXlWaWRlbygpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgZm9ybWF0VGltZSA9IHRpbWVTZWMgPT4ge1xyXG4gIGNvbnN0IHJvdW5kVGltZSA9IE1hdGgucm91bmQodGltZVNlYyk7XHJcblxyXG4gIGNvbnN0IG1pbnV0ZXMgPSBhZGRaZXJvKE1hdGguZmxvb3Iocm91bmRUaW1lIC8gNjApKTtcclxuICBjb25zdCBzZWNvbmRzID0gYWRkWmVybyhyb3VuZFRpbWUgLSBtaW51dGVzICogNjApO1xyXG5cclxuICBmdW5jdGlvbiBhZGRaZXJvKG51bSl7XHJcbiAgICByZXR1cm4gbnVtIDwgMTAgPyBgMCR7bnVtfWAgOiBudW07XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIGAke21pbnV0ZXN9IDogJHtzZWNvbmRzfWA7XHJcbn07XHJcblxyXG5jb25zdCBvblBsYXllclJlYWR5ID0gKCkgPT4ge1xyXG4gIGxldCBpbnRlcnZhbDtcclxuXHJcbiAgY29uc3QgZHVyYXRpb25TZWNvbmRzID0gcGxheWVyLmdldER1cmF0aW9uKCk7XHJcblxyXG4gICQoJy5wbGF5ZXJfX2R1cmF0aW9uLWVzdGltYXRlJykudGV4dChmb3JtYXRUaW1lKGR1cmF0aW9uU2Vjb25kcykpO1xyXG5cclxuICBpZiAodHlwZW9mIGludGVydmFsICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICBjbGVhckludGVydmFsKGludGVydmFsKVxyXG4gIH1cclxuXHJcbiAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICBjb25zdCBjb21wbGV0ZWRTZWMgPSBwbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKTtcclxuICAgIGNvbnN0IGNvbXBsZXRlZFBlcmNlbnQgPSAoY29tcGxldGVkU2VjIC8gZHVyYXRpb25TZWNvbmRzKSAqIDEwMDtcclxuICAgICQoJy5wbGF5ZXJfX3BsYXliYWNrLWJ0bicpLmNzcyh7J2xlZnQnIDogYCR7Y29tcGxldGVkUGVyY2VudH0lYH0pO1xyXG4gICAgJCgnLnBsYXllcl9fZHVyYXRpb24tY29tcGxldGVkJykudGV4dChmb3JtYXRUaW1lIChjb21wbGV0ZWRTZWMpKTsgXHJcbiAgfSwgMTAwMCk7XHJcbn07XHJcblxyXG5jb25zdCBvblBsYXllclN0YXRlQ2hhbmdlID0gZXZlbnQgPT4ge1xyXG4gIHN3aXRjaCAoZXZlbnQuZGF0YSl7XHJcbiAgICBjYXNlIDE6XHJcbiAgICAgIHZpZGVvQ29udGFpbmVyLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgdmlkZW9Db250YWluZXIuYWRkQ2xhc3MoJ3BhdXNlZCcpO1xyXG4gICAgICBicmVhaztcclxuICAgIFxyXG4gICAgY2FzZSAyOlxyXG4gICAgICB2aWRlb0NvbnRhaW5lci5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIHZpZGVvQ29udGFpbmVyLnJlbW92ZUNsYXNzKCdwYXVzZWQnKTsgXHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkoKSB7XHJcbiAgcGxheWVyID0gbmV3IFlULlBsYXllcigncGxheWVyLS12aWRlbycsIHtcclxuICAgIGhlaWdodDogJzM1NycsXHJcbiAgICB3aWR0aDogJzY2MicsXHJcbiAgICB2aWRlb0lkOiAnOGpKZ05kaS11NWsnLFxyXG4gICAgZXZlbnRzOiB7XHJcbiAgICAgICdvblJlYWR5Jzogb25QbGF5ZXJSZWFkeSxcclxuICAgICAgJ29uU3RhdGVDaGFuZ2UnOiBvblBsYXllclN0YXRlQ2hhbmdlXHJcbiAgICB9LFxyXG4gICAgcGxheWVyVmFyczoge1xyXG4gICAgICBjb250cm9sczogMCxcclxuICAgICAgZGlzYWJsZWtiOiAwLFxyXG4gICAgICAvLyBzaG93aW5mbzogMCxcclxuICAgICAgcmVsOiAwLFxyXG4gICAgICBhdXRvcGxheTogMCxcclxuICAgICAgbW9kZXN0YnJhbmRpbmc6IDBcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZXZlbnRzTGlzdCgpOyIsIiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcbiAgJCgnLnJldmlld3NfX2NvbnRlbnQtbGlzdF9faXRlbS1saW5rJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICB9KVxuXG5cblxuXG5cblxuICAkKCcucmV2aWV3c19fY29udGVudC1saXN0X19pdGVtJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGxldCBpbmRleEl0ZW0gPSAkKHRoaXMpLmluZGV4KClcbiAgICAkKCcucmV2aWV3c19fY29udGVudCcpLmVxKGluZGV4SXRlbSkuYWRkQ2xhc3MoJ3Jldmlld3MtLWFjdGl2ZScpO1xuICAgICQoJy5yZXZpZXdzX19jb250ZW50JykuZXEoaW5kZXhJdGVtKS5zaWJsaW5ncygnLnJldmlld3NfX2NvbnRlbnQnKS5yZW1vdmVDbGFzcygncmV2aWV3cy0tYWN0aXZlJylcbiAgICAkKHRoaXMpLmZpbmQoJy5yZXZpZXdzX19jb250ZW50LWxpc3RfX2l0ZW0tbGluaycpLmFkZENsYXNzKCdyZXZpZXdzX19jb250ZW50LS1hY3RpdmUnKTtcbiAgICAkKHRoaXMpLnNpYmxpbmdzKCcucmV2aWV3c19fY29udGVudC1saXN0X19pdGVtJykuZmluZCgnLnJldmlld3NfX2NvbnRlbnQtbGlzdF9faXRlbS1saW5rJykucmVtb3ZlQ2xhc3MoJ3Jldmlld3NfX2NvbnRlbnQtLWFjdGl2ZScpXG4gICAgY29uc29sZS5sb2coaW5kZXhJdGVtKVxuICB9KTtcblxuXG59KTsiLCJjb25zdCBoaWRlQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hpZGVzX19iYXInKVxyXG5jb25zdCBidXJnZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlcl9fbWVudScpXHJcbmNvbnN0IGJ1cmdlckNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlcl9fY2xvc2UnKVxyXG5cclxuYnVyZ2VyTWVudS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBoaWRlQmFyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gIGJ1cmdlckNsb3NlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gIGJ1cmdlck1lbnUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxufSk7XHJcblxyXG5idXJnZXJDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBoaWRlQmFyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgYnVyZ2VyQ2xvc2Uuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICBidXJnZXJNZW51LnN0eWxlLmRpc3BsYXkgPSAnJztcclxufSk7XHJcblxyXG5jb25zdCBzbGlkZXJDb21wb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19jb21wb3MnKVxyXG5jb25zdCBzbGlkZXJDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fY29tcG9zLXBvcHVwJylcclxuc2xpZGVyQ29tcG9zLm9ubW91c2VvdmVyID0gKCkgPT4ge1xyXG4gIHNsaWRlckNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbn07XHJcbnNsaWRlckNvbXBvcy5vbm1vdXNlb3V0ID0gKCkgPT4ge1xyXG4gIHNsaWRlckNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxufTsiLCIkKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XHJcbiAgJCgnLnRlYW1fX2l0ZW0tbmFtZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgY29uc3QgYWNjb3JkQWN0aXZlQ2xvc2UgPSAkKCcuYWNjb3JkLS1hY3RpdmUnKVxyXG4gICAgY29uc3Qgc2xpZGVyQ2xvc2UgPSAkKCd0ZWFtX19pdGVtJykuaGFzQ2xhc3MoIWFjY29yZEFjdGl2ZUNsb3NlKTtcclxuICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhY2NvcmQtLWFjdGl2ZScpKXtcclxuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWNjb3JkLS1hY3RpdmUnKTtcclxuICAgICAgJCh0aGlzKS5uZXh0KCcudGVhbV9faXRlbS1jb250ZW50Jykuc2xpZGVVcCgpO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgIC8vIGxldCBjbG9uZVBvcyA9ICQodGhpcykucHJldignLnRlYW1fX2l0ZW0taGVhZCcpO1xyXG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY2NvcmQtLWFjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLm5leHQoJy50ZWFtX19pdGVtLWNvbnRlbnQnKS5zbGlkZURvd24oMjAwKTtcclxuICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLnRlYW1fX2l0ZW0tY29udGVudCcpLnNsaWRlRG93bigyMDApO1xyXG4gICAgICAkKHRoaXMpLmNsb3Nlc3QoJy50ZWFtX19pdGVtJykuc2libGluZ3MoJy50ZWFtX19pdGVtJykuZmluZCgnLnRlYW1fX2l0ZW0tY29udGVudCcpLnNsaWRlVXAoKTtcclxuICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudGVhbV9faXRlbScpLnNpYmxpbmdzKCcudGVhbV9faXRlbScpLmZpbmQoJy50ZWFtX19pdGVtLW5hbWUnKS5yZW1vdmVDbGFzcygnYWNjb3JkLS1hY3RpdmUnKTtcclxuICAgICAgLy8gJChjbG9uZVBvcykuY3NzKHsnZGlzcGxheScgOiAnaW5saW5lLWJsb2NrJ30pXHJcbiAgICAgIC8vIGxldCBjbG9uZXNzID0gJCh0aGlzKS5uZXh0KCcudGVhbV9faXRlbS1jb250ZW50Jyk7XHJcbiAgICAgIC8vICQodGhpcykucHJldignLnRlYW1fX2l0ZW0taGVhZCcpLnByZXBlbmRUbyhjbG9uZXNzKTtcclxuICAgIH07XHJcbiAgfSk7XHJcbn0pOyJdfQ==
